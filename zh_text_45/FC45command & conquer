FC45command & conquer
Conky - 第二部分
作者 Lucas Westermann
这个月，我将会为那些需要类GUI系统监视器的读者额外讲一些Conky所能做的事。在开始之前，如果大家对为什么我为系统写一个新脚本，而不是直接把代码写在.conkyrc文件里有疑问，请参考我在读者来信中的回答。

如果你看过我桌面的截屏（http://lswest.deviantart.com/）,你会注意到在我的主Conky中有一个非常显著的“音乐”部分。如果你不明白我在说什么，请看看我最新的截图（显示在右侧）：http://lswest.deviantart.com/#/d360pfy。根本上，我的脚本会从MPD（Music Play Daemon）中读取音乐信息，然后根据歌手和专辑名从albumart.org下载图片。如果脚本没能自动下载图片，我可以手动下载，按规则取好相应的文件名放在.covers目录中，它就会被用来显示了。对于在Conky中显示的问题，脚本会在/tmp/cover中保存一份当前音乐的图片拷贝，然后Conky就会显示那张拷贝的图片（每15秒更新一次）。这部分脚本被包含在了一个if语句中，为的是避免在MPD没有运行的情况下显示空白信息。我将我的脚本综合起来放在了一个基本的.conkyrc文件中：http://lswestfcm.pastebin.com/rrCS0hDt，脚本在这里：http://lswestfcm.pastebin.com/iX7Y7W3v
现在，听我详细解释。.conkyrc的第一行（“imlib_cache_size 0”）指定Conky不要缓存图片（这是必要的，因为你希望更新图片）。其他行和上个月基本上是一样的，另外加上了MPD，它告诉Conky在哪里能找到MPD。这只有在你用MPD播放音乐时才是必须的。如果你用了其他软件，那你则必须调整Python脚本让它去你的软件中读专辑和歌手信息，然后替代conkyrc文件中MPD指定调用方式。其他部分应该是能够自解释的，并且下面是TEXT头后面发生的事情：
我强迫它使用UTF-8，使之能够正确显示可能出现的特殊字符。
写我的“MUSIC”头文件
显示状态
开始if语句
       • 每2秒运行一次python脚本
• 以50像素×50像素的分辨率在（100，330）处（（x,y）坐标格式）显示/tmp/cover ，每15秒更新一次 • 显示歌手 • 显示曲目 • 显示一个进度条，在两端标识已逝去时间和总时间。
结束if语句
“我强迫它使用UTF-8，使之能够正确显示可能出现的特殊字符。。。”
我意识到这是一篇短文，而且可能这不是那么的相关（我不确定到底有多少Ubuntu用户在用MPD），但是我觉得它十分有用的，而且对于那些想要学更多Conky的人来说是非常好的实践。而且，如果之前你没用过MPD，我强烈推荐它。因为它是一个守护进程，它会在关机时会记录它的状态，因此在重启之后你可以立即恢复播放音乐，或继续播放停下的那首歌。它还有很多前端，我在之间的文章中提到过（FCCTT32期的25页,音乐播放服务器）。作为一个解释Conky还能用来做什么的小例子，我给你看这个链接：https://bbs.archlinux.org/viewtopic.php?pid=875306#p875306。这是一篇在Arch Linux论坛上的帖子，它展示了Conky如何用lua脚本运行GUI元素。我相信现在Conky已经默认启用lua支持了，但是可能在Ubuntu源里面的版本默认是禁用的，所以如果你决定试试的话，记住这一点。
跟往常一样，我希望至少有一些人觉得这部分是有用的，我想知道你对于在Conky中使用MPD前端的看法，还有你的任何反馈或者对于文章的想法！你可以给我发邮件：lswest34@gmail.com，请在主题中加上“C&C”或者“Full Circle Magazine”，这样我会绝不会错过它！另外，我更希望邮件能用英语或者德语来写——我以前收过到一封法语邮件，这非常难以解密。那封邮件中，那个读者指出了“file命令”的存在——那是一个程序，它能显示关于文件类型的信息（例如JPEG，MP3，等等）。
